{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://E%3A/islamic-donation-management-system/components/DonationForm.tsx"],"sourcesContent":["'use client'\r\nimport React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport axios from 'axios';\r\n\r\nconst stripePromise = loadStripe(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY || '');\r\n\r\ntype DonationFormData = {\r\n  amount: number;\r\n  currency: string;\r\n};\r\n\r\nconst DonationForm: React.FC = () => {\r\n  const { register, handleSubmit, formState: { errors } } = useForm<DonationFormData>();\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n\r\n  const onSubmit = async (data: DonationFormData) => {\r\n    setIsProcessing(true);\r\n    setMessage('');\r\n\r\n    try {\r\n      // Send donation data to the backend\r\n      const response = await axios.post('/api/donation/checkout', {\r\n        amount: Math.round(data.amount * 100), // Convert to smallest unit (e.g., cents)\r\n        currency: data.currency,\r\n      });\r\n\r\n      const clientSecret = response.data.clientSecret;\r\n\r\n      // Load Stripe and confirm payment\r\n      const stripe = await stripePromise;\r\n      if (!stripe) throw new Error('Stripe failed to load');\r\n\r\n      const result = await stripe.confirmCardPayment(clientSecret);\r\n\r\n      if (result.error) {\r\n        setMessage(`Payment failed: ${result.error.message}`);\r\n      } else if (result.paymentIntent?.status === 'succeeded') {\r\n        setMessage('Thank you for your donation!');\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setMessage('An error occurred. Please try again.');\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)} className=\"donation-form\">\r\n      <h2>Donate Now</h2>\r\n\r\n      <div>\r\n        <label htmlFor=\"amount\">Donation Amount</label>\r\n        <input\r\n          type=\"number\"\r\n          step=\"0.01\"\r\n          id=\"amount\"\r\n          {...register('amount', { required: 'Amount is required', min: 1 })}\r\n        />\r\n        {errors.amount && <p>{errors.amount.message}</p>}\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"currency\">Currency</label>\r\n        <select id=\"currency\" {...register('currency', { required: 'Currency is required' })}>\r\n          <option value=\"usd\">USD</option>\r\n          <option value=\"eur\">EUR</option>\r\n          <option value=\"gbp\">GBP</option>\r\n        </select>\r\n        {errors.currency && <p>{errors.currency.message}</p>}\r\n      </div>\r\n\r\n      <button type=\"submit\" disabled={isProcessing}>\r\n        {isProcessing ? 'Processing...' : 'Donate'}\r\n      </button>\r\n\r\n      {message && <p>{message}</p>}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default DonationForm;\r\n"],"names":[],"mappings":";;;;AACA;AAEA;AAAA;AAGiC;AAJjC;AAEA;;;AAJA;;;;;AAMA,MAAM,gBAAgB,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE,wEAAkD;AAOnF,MAAM,eAAyB;;IAC7B,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,MAAM,EAAE,EAAE,GAAG,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD;IAChE,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,WAAW,OAAO;QACtB,gBAAgB;QAChB,WAAW;QAEX,IAAI;YACF,oCAAoC;YACpC,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,0BAA0B;gBAC1D,QAAQ,KAAK,KAAK,CAAC,KAAK,MAAM,GAAG;gBACjC,UAAU,KAAK,QAAQ;YACzB;YAEA,MAAM,eAAe,SAAS,IAAI,CAAC,YAAY;YAE/C,kCAAkC;YAClC,MAAM,SAAS,MAAM;YACrB,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;YAE7B,MAAM,SAAS,MAAM,OAAO,kBAAkB,CAAC;YAE/C,IAAI,OAAO,KAAK,EAAE;gBAChB,WAAW,CAAC,gBAAgB,EAAE,OAAO,KAAK,CAAC,OAAO,EAAE;YACtD,OAAO,IAAI,OAAO,aAAa,EAAE,WAAW,aAAa;gBACvD,WAAW;YACb;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,WAAW;QACb,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE,6LAAC;QAAK,UAAU,aAAa;QAAW,WAAU;;0BAChD,6LAAC;0BAAG;;;;;;0BAEJ,6LAAC;;kCACC,6LAAC;wBAAM,SAAQ;kCAAS;;;;;;kCACxB,6LAAC;wBACC,MAAK;wBACL,MAAK;wBACL,IAAG;wBACF,GAAG,SAAS,UAAU;4BAAE,UAAU;4BAAsB,KAAK;wBAAE,EAAE;;;;;;oBAEnE,OAAO,MAAM,kBAAI,6LAAC;kCAAG,OAAO,MAAM,CAAC,OAAO;;;;;;;;;;;;0BAG7C,6LAAC;;kCACC,6LAAC;wBAAM,SAAQ;kCAAW;;;;;;kCAC1B,6LAAC;wBAAO,IAAG;wBAAY,GAAG,SAAS,YAAY;4BAAE,UAAU;wBAAuB,EAAE;;0CAClF,6LAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,6LAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,6LAAC;gCAAO,OAAM;0CAAM;;;;;;;;;;;;oBAErB,OAAO,QAAQ,kBAAI,6LAAC;kCAAG,OAAO,QAAQ,CAAC,OAAO;;;;;;;;;;;;0BAGjD,6LAAC;gBAAO,MAAK;gBAAS,UAAU;0BAC7B,eAAe,kBAAkB;;;;;;YAGnC,yBAAW,6LAAC;0BAAG;;;;;;;;;;;;AAGtB;GArEM;;QACsD,iKAAA,CAAA,UAAO;;;KAD7D;uCAuES"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}